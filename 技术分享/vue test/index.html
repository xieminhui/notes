<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>vue</title>
  <style>
    html,
    body {
      width: 100%;
      height: 100%;
      overflow: hidden;
    }

    #app {
      margin: 100px auto;
      width: 600px;
      height: 600px;
    }
  </style>
</head>

<body>
  <div id="app">
    <p id="msg">{{ msg }}</p>
    <button @click="changeTxt">改变文字</button>
    <button @click="changeTxt1">改变文字1</button>
    <button @click="test1">test1</button>
    <button @click="test2">test2</button>
    <button @click="test3">test3</button>
    <button @click="test4">test4</button>
    <button @click="test5">test5</button>
    <button @click="test6">test6</button>
    <button onclick="test7()">test7</button>
    <p></p>
    <br>
    <a href="https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/?utm_source=html5weekly
    " target="blank">演示</a>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/vue"></script>
  <script>
    function test7() {
      var msg = document.getElementById('msg');
      msg.style.height = '100px';
      msg.textContent = 1;
      show();
    }
    function show() {
      console.log(msg.textContent,  msg.style.height);
    }
    var app = new Vue({
      el: '#app',
      data: {
        msg: 'Hello Vue!'
      },
      methods: {
        changeTxt() {
          this.msg = 1;
          this.$nextTick(() => {
            this.msg = 2;
            console.log(this.msg);
          })
        },
        changeTxt1() {
          this.msg = 1;
          setTimeout(() => {
            this.msg = 2;
            console.log(this.msg);
          }, 0)
        },
        test1() {
          setTimeout(() => {
            this.msg = 2;
            console.log(this.msg);
          }, 0)
        },
        test2() {
          let _this = this;
          Promise.resolve().then(function Promise1() {
            _this.msg = 2;
          })
        },
        test3() {
          let _this = this;
          setTimeout(function setTimeout1() {
            _this.msg = 2;
          }, 0)
          setTimeout(function setTimeout2() {
            _this.msg = 3;
          }, 0)
        },
        test4() {
          let _this = this;
          setTimeout(function setTimeout1() {
            _this.msg = 2;
            Promise.resolve().then(function Promise1() {
              console.log('promise1');
            })
          }, 0)
          setTimeout(function setTimeout2() {
            _this.msg = 3;
            Promise.resolve().then(function Promise2() {
              console.log('promise2');
            })
          }, 0)
        },
        test5() {
          let _this = this;
          setTimeout(function setTimeout1() {
            _this.msg = 2;
          }, 0)
          setTimeout(function setTimeout2() {
            _this.msg = 3;
          }, 16.7)
        },
        test6() {
          // let _this = this;
          function bar(num, id) {
            var product = num * num;
            var resultEle = document.getElementById(id);
            resultEle.textContent = product;
          }
          bar(2, 'msg');
          bar(3, 'msg');
          bar(4, 'msg');
          bar(5, 'msg');
        }
      },
    })
  </script>
  <!-- <script>
    console.log('1');
    setTimeout(function () {
      console.log('2');
      Promise.resolve().then(function () {
        console.log('6');
      }).then(function () {
        console.log('7');
      });
      setTimeout(function () {
        console.log('8')
      }, 0)
    }, 0);

    Promise.resolve().then(function () {
      console.log('3');
    }).then(function () {
      console.log('4');
      setTimeout(function () {
        console.log('9')
      }, 0);
    });
    console.log('5');

    function foo() {
      bar();
    }

    function bar() {
      
      console.log('bar');
    }
    foo();
  </script> -->
</body>

</html>